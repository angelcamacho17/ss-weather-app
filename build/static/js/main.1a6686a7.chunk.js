(this["webpackJsonpss-weather-app"]=this["webpackJsonpss-weather-app"]||[]).push([[0],{100:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(36),o=a.n(i),s=(a(51),a(19)),c=a(9),l=a(10),m=a(13),u=a(12),d=(a(52),a(2)),p=a(11),h=(a(53),a(54)),f=function(t){Object(m.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={newDate:"",weekdat:"",imgURL:""},n.goToDay=n.goToDay.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"goToDay",value:function(){this.props.history.push("/"+this.props.reading.dt_txt.split(" ")[0])}},{key:"componentWillMount",value:function(){var t=new Date,e=1e3*this.props.reading.dt;this.setState({newDate:t.setTime(e),weekday:e,imgURL:"owf owf-".concat(this.props.reading.weather[0].id," owf-5x")})}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-sm-2",onClick:this.goToDay},r.a.createElement("div",{className:"card"},r.a.createElement("h3",{className:"card-title"},h(this.state.newDate).format("dddd")),r.a.createElement("p",{className:"text-muted"},h(this.state.newDate).format("MMMM Do, h:mm a")),r.a.createElement("i",{className:this.state.imgURL}),r.a.createElement("h2",null,Math.round(this.props.reading.main.temp)," \xb0C"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"max"},"Max temp: ",this.props.reading.max," "),r.a.createElement("div",{className:"max"},"Min temp: ",this.props.reading.mini," "),r.a.createElement("p",{className:"card-text"},this.props.reading.weather[0].description))))}}]),a}(r.a.Component),g=(a(56),function(t){Object(m.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).formatDayCards=function(){return n.props.dailyData?n.props.dailyData.map((function(t,e){return r.a.createElement(f,Object.assign({},n.props,{reading:t,key:e}))})):[]},console.log(n.props.fullData),n.goToDay=n.goToDay.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"goToDay",value:function(){console.log("here")}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-1 jumbotron"},"5-Day Forecast."),r.a.createElement("h5",{className:"display-5 text-muted"},"Santiago metropolitan region, CL"),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"cards"},this.formatDayCards())))}}]),a}(r.a.Component)),y=a(39),v=a(107),b=a(108),x=a(105),D=a(106),E=a(109),w=a(110),O=a(111);function j(t){t.percentage;var e=t.width,a=t.height,n=[];n=JSON.parse(JSON.stringify(t.data));var i,o=e-40-40,s=a-20-20,c=function(t){return t.dt_txt.split(" ")[1]},l=function(t){return t.main.temp},m=Object(x.a)({rangeRound:[0,o],domain:n.map(c),padding:.4}),u=Math.max.apply(Math,Object(y.a)(n.map(l))),d=Object(D.a)({rangeRound:[s,0],domain:[0,u+(i=u,Math.sqrt(i))]}),p=function(t,e){return function(a){return t(e(a))}},h=p(m,c),f=p(d,l);return r.a.createElement("svg",{width:e,height:a},n.map((function(t,e){var a=s-f(t);return r.a.createElement(v.a,{key:"bar-".concat(e)},r.a.createElement(b.a,{x:h(t)+60,y:s-a,height:a,width:m.bandwidth(),fill:"#3399F3"}),r.a.createElement(E.a,{scale:d,top:0,left:60,hideZero:!0,label:"Temperature",stroke:"#1b1a1e",tickTextFill:"#1b1a1e",numTicks:5,axisClassName:"leftAxis"}),r.a.createElement(w.a,{scale:m,top:s,left:60,hideZero:!0,label:"Hours",stroke:"#1b1a1e",tickTextFill:"#1b1a1e",axisClassName:"rightAxis"}),r.a.createElement(O.a,{x:h(t)+60+m.bandwidth()/2-5,y:s-a-5},"".concat(t.main.temp," \xb0C")))})))}j.defaultProps={percentage:!1,width:600,height:300};var k=j,M=function(t){Object(m.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={day:t.match.params.day,data:[]},console.log(t.match),console.log(n.props.fullData),n.dayStats=n.dayStats.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){this.dayStats()}},{key:"componentDidMount",value:function(){console.log(this.props.fullData)}},{key:"dayStats",value:function(){if(console.log(this.props.fullData),this.props.fullData){var t,e=Object(s.a)(this.props.fullData);try{for(e.s();!(t=e.n()).done;){var a=t.value;console.log(a.dt_txt.split(" ")[0]),console.log(this.state.day),a.dt_txt.split(" ")[0]===this.state.day&&this.state.data.push(a)}}catch(n){e.e(n)}finally{e.f()}}console.log(this.state.data)}},{key:"render",value:function(){return this.dayStats(),r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Weather for the day ",this.state.day),r.a.createElement(k,{data:this.state.data,percentage:!1,width:600,height:300}))}}]),a}(r.a.Component),N=function(t){Object(m.a)(a,t);var e=Object(u.a)(a);function a(){var t;return Object(c.a)(this,a),(t=e.call(this)).componentDidMount=function(){var e="http://api.openweathermap.org/data/2.5/forecast?q=santiago,cl&units=metric&APPID=".concat("79a1afb8b7f7a545a464c897a77f1eaa");fetch(e).then((function(t){return t.json()})).then((function(e){var a=e.list.filter((function(t){return t.dt_txt.includes("18:00:00")}));t.setState({fullData:e.list,dailyData:t.getMaxMinPerDay(e.list,a)},(function(){return console.log(t.state)}))}))},t.state={fullData:[],dailyData:[]},t}return Object(l.a)(a,[{key:"getMaxMinPerDay",value:function(t,e){var a,n=new Map,r=new Map,i=Object(s.a)(t);try{var o=function(){var t=a.value,i=t.dt_txt.split(" ")[0];if(n.get(i)){if(t.main.temp_max>n.get(i)){n.set(i,t.main.temp_max);var o=e.filter((function(e){return e.dt_txt.split(" ")[0]===t.dt_txt.split(" ")[0]}));o=o[0];var s=e.indexOf(o);-1!==s&&(e[s].max=t.main.temp_max)}}else n.set(i,t.main.temp_max);if(t.main.temp_min<r.get(i)){r.set(i,t.main.temp_min);var c=e.filter((function(e){return e.dt_txt.split(" ")[0]===t.dt_txt.split(" ")[0]}));c=c[0];var l=e.indexOf(c);-1!==l&&(e[l].mini=t.main.temp_min)}else r.set(i,t.main.temp_min)};for(i.s();!(a=i.n()).done;)o()}catch(c){i.e(c)}finally{i.f()}return e}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"App"},r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(g,Object.assign({},e,{fullData:t.state.fullData,dailyData:t.state.dailyData}))}}),r.a.createElement(d.a,{exact:!0,path:"/:day",render:function(e){return r.a.createElement(M,Object.assign({},e,{fullData:t.state.fullData}))}})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(26);o.a.render(r.a.createElement(_.a,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},46:function(t,e,a){t.exports=a(100)},51:function(t,e,a){},52:function(t,e,a){},53:function(t,e,a){},56:function(t,e,a){}},[[46,1,2]]]);
//# sourceMappingURL=main.1a6686a7.chunk.js.map